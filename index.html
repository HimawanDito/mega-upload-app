<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>MEGA Upload Center</title>

<script src="https://cdn.jsdelivr.net/npm/megajs@1.1.3/dist/main.browser-umd.js"></script>

<style>
body{
  font-family:Arial;
  background:#0f172a;
  color:white;
  display:flex;
  justify-content:center;
  align-items:center;
  height:100vh;
}

.card{
  background:#1e293b;
  padding:25px;
  border-radius:18px;
  width:350px;
}

input,select,button{
  width:100%;
  margin-top:10px;
  padding:10px;
  border-radius:10px;
  border:none;
}

button{
  background:#22c55e;
  color:white;
  font-weight:bold;
  cursor:pointer;
}

.progress{
  margin-top:15px;
  height:10px;
  background:#334155;
  border-radius:10px;
}

.bar{
  height:100%;
  width:0%;
  background:#22c55e;
  border-radius:10px;
}
</style>
</head>

<body>

<div class="card">

<h2>ðŸš€ MEGA Upload</h2>

<input id="email" placeholder="Email MEGA">
<input id="pass" type="password" placeholder="Password">

<button onclick="login()">Login</button>

<select id="folder"></select>

<input type="file" id="files" multiple>

<button onclick="upload()">Upload</button>

<div class="progress"><div class="bar" id="bar"></div></div>

<p id="status"></p>

</div>

<script>

let mega;

function login(){

status.innerText="Logging in...";

mega = new Mega({
  email: email.value,
  password: pass.value,
  keepalive:true
});

mega.on('ready', () => {

status.innerText="âœ… Login sukses";

folder.innerHTML="";

mega.root.children.forEach(f=>{
  if(f.directory){
    folder.innerHTML += `<option value="${f.nodeId}">${f.name}</option>`;
  }
});

});

mega.on('error', e=>{
status.innerText="âŒ Login gagal";
});
}

async function upload(){

let files = document.getElementById("files").files;

if(!files.length) return;

let target = mega.find(folder.value);

for(let file of files){

status.innerText="Uploading "+file.name;

let up = target.upload(file);

up.on('progress', p=>{
bar.style.width = (p*100)+"%";
});

await new Promise(res=>up.on('complete', res));
}

status.innerText="âœ… Semua file selesai";
bar.style.width="0%";
}

</script>

</body>
</html>